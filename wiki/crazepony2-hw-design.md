---
layout: wiki
title: Crazepony2硬件原理图设计
---

# {{page.title}}

> 作者： 球深

## 硬件组件
+ 主控：STM32F303CCT6
+ 姿态传感器：MPU6050（3轴加速度+3轴角速度）
+ 电子罗盘：HMC5883L（未焊接）
+ 气压计：FBM320
+ 无线通信协议：NRF24L01+WIFI图传模块
+ 有线通信协议：CP2102（USB转串口）
+ 电机驱动：SI2302场效应管
+ 外部接口:标准Mirco USB接口
+ 电机：空心杯（Coreless）高速有刷电机，38000转/分钟
+ 桨叶：75mm黑色正反桨
+ 电池：3.7V，650mAh，25C航模动力电池

## 主控
+ 单片机在任何一个系统里面，无论他扮演什么角色，它要正常工作，都必须要有一个最小系统。

  ![](/assets/img/c2-hw-2.jpg)
  
+ STM32的最小系统包括复位电路，外部时钟电路，启动模式选择电路，电源退偶电路等
### 复位
+ 查阅意法半导的官方手册可以知道，STM32系列单片机都是低电平复位，对应芯片上的NRST引脚。在最新的Crazepony2上，去掉了复位按钮，只能够通过开关上断电进行复位。STM32的复位引脚NRST接到了USB串口芯片CP2102上，作用和原理在其中模式部分会详细介绍。
### 外部时钟
+ 官方手册有写，外部时钟我们采用的是8M无源晶振。单片机内部做倍频，系统时钟最高可达到72M。
### 电源退偶
+ 不仅是主控最小系统需要对电源退偶，所有的数字电路和模拟电路共存的系统，都需要对电源退偶。电源退偶，说直接一点就是将电源上的噪声电压引入到地平面，让电源电压保持在一个稳定的值，这样系统才可能稳定工作。怎么做呢？用一个大电容并联一个小电容。

  ![](/assets/img/c2-hw-3.jpg)

+ 我们都知道，电容对频率越高的信号，呈现低阻特性，对直流呈现高阻特性。那么电源上的噪声对地平面而言，就是一个交流信号，交流信号就能通过电容到达地平面，而电源是一个直流，电容对他呈现出无限大的阻力，无法通过。这样，我们用示波器就可以看到，加了退偶电容的电源会比没加退偶电容的电源，波形要稳定得多。

## 系统电源

  ![](/assets/img/c2-hw-4.jpg)
  
  ![](/assets/img/c2-hw-5.jpg)
  
## 充电管理

  ![](/assets/img/c2-hw-6.jpg)
  
## 传感器

  ![](/assets/img/c2-hw-7.jpg)
  
  ![](/assets/img/c2-hw-8.jpg)

## 电机驱动

  ![](/assets/img/c2-hw-9.jpg)

## 无线模块

  ![](/assets/img/c2-hw-10.jpg)
  
## 串口模块

  ![](/assets/img/c2-hw-11.jpg)
  
## 图传模块

  ![](/assets/img/c2-hw-12.jpg)